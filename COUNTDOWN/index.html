<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mr. ORK — Guida gratuita</title>
  <meta name="description" content="Scarica la mini-guida e riserva il posto in lista VIP per i prossimi 50 accessi alla Mr. ORK Trading Academy." />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0a0a0a; --text:#eafff3; --muted:#bdbdbd;
      --green:#00ff64; --green-2:#00cc50; --border:rgba(0,255,100,.28);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--bg);color:#fff;font-family:'Poppins',system-ui,Arial,sans-serif;overflow-x:hidden}

    /* Layout principale - OTTIMIZZATO PER VIEWPORT */
    .hero{
      position:relative;height:100vh;overflow:hidden;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      padding:2vh 20px;
      box-sizing:border-box;
    }

    /* SFONDO con parallax */
    .hero::before{
      content:"";position:absolute;inset:0;z-index:1;
      background:url("assets/bg.jpg") center/cover no-repeat;
      filter:brightness(.85);
      transition:transform 0.1s ease-out;
    }

    /* Overlay per effetto depth */
    .hero::after{
      content:"";position:absolute;inset:0;z-index:2;
      background:radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.3) 100%);
      pointer-events:none;
    }

    /* LAYOUT FLESSIBILE - BILANCIATO */
    .content-wrapper{
      position:relative;z-index:4;
      display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;
      max-width:1200px;width:100%;height:100%;
      animation:fadeInUp 1s ease-out;
      padding:2vh 0;
      box-sizing:border-box;
    }

    /* TITOLO PRINCIPALE sopra il coccodrillo - PIÙ SPAZIO */
    .main-title{
      text-align:center;line-height:1.05;letter-spacing:.5px;
      color:var(--text);margin:0;
      text-shadow:0 0 30px rgba(0,255,100,.5), 0 4px 12px rgba(0,0,0,.9);
      animation:glow 3s ease-in-out infinite alternate;
      z-index:5;
      position:relative;
      flex-shrink:0;
      flex-basis:auto;
    }
    .main-title .line{
      display:block;font-weight:900;
      font-size:clamp(1.6rem,4.5vw,2.8rem);
      margin:.08em 0;
      /* RIMOSSO opacity:0 per far apparire subito il titolo */
      opacity:1;
      animation:slideInDown 1s ease-out forwards;
      text-transform:uppercase;
    }
    .main-title .line:nth-child(1){
      animation-delay:.3s; 
      color:var(--green);
      /* Backup per assicurarsi che sia visibile */
      opacity:1 !important;
    }
    .main-title .line:nth-child(2){
      animation-delay:.6s; 
      font-size:clamp(1.3rem,3.8vw,2.3rem);
      opacity:1 !important;
    }
    .main-title .line:nth-child(3){
      animation-delay:.9s; 
      color:var(--green); 
      font-size:clamp(1.7rem,5vw,3.2rem);
      opacity:1 !important;
    }

    /* COCCODRILLO con effetti parallax migliorati - BILANCIATO */
    .croc-container{
      position:relative;margin:0;
      animation:bounceIn 1.5s ease-out 1.2s both;
      cursor:pointer;
      transition:transform 0.1s ease-out;
      flex-shrink:1;
      flex-basis:auto;
      display:flex;align-items:center;justify-content:center;
    }
    .croc{
      width:min(280px,45vw);max-width:320px;
      filter:drop-shadow(0 15px 30px rgba(0,255,100,.4));
      transition:all .4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      animation:float 4s ease-in-out infinite;
      position:relative;
      z-index:3;
    }
    .croc-container:hover .croc{
      transform:scale(1.1) rotate(3deg);
      filter:drop-shadow(0 35px 70px rgba(0,255,100,.6)) brightness(1.2);
      animation-play-state:paused;
    }

    /* Effetto pulsazione al click */
    .croc-container.clicked .croc{
      transform:scale(1.15) rotate(5deg);
      filter:drop-shadow(0 35px 70px rgba(0,255,100,.7)) brightness(1.3);
    }

    /* TAGLINE sotto il coccodrillo */
    .tagline{
      text-align:center;color:var(--muted);font-size:clamp(1rem,2.8vw,1.3rem);
      margin:3vh 0 4vh;font-weight:600;letter-spacing:.5px;
      opacity:0;animation:fadeIn 1s ease-out 1.2s both;
      text-shadow:0 2px 4px rgba(0,0,0,.5);
    }

    /* INVITO AL CLICK sotto il coccodrillo - COMPATTO E FLESSIBILE */
    .click-invitation{
      text-align:center;margin:0;
      opacity:1 !important;
      animation:fadeInUp 1s ease-out 1.8s both;
      padding:1.2vh 1vh;
      background:rgba(0,255,100,0.05);
      border:1px solid var(--border);
      border-radius:12px;
      backdrop-filter:blur(10px);
      visibility:visible !important;
      flex-shrink:0;
      flex-basis:auto;
      max-width:95%;
    }
    .click-invitation .main-text{
      color:var(--text);font-size:clamp(1rem,2.8vw,1.3rem);
      font-weight:700;margin-bottom:1vh;
      text-shadow:0 2px 8px rgba(0,0,0,.6);
    }
    .click-invitation .hint{
      color:var(--green);font-size:clamp(0.9rem,2.5vw,1.1rem);
      font-weight:800;letter-spacing:.6px;text-transform:uppercase;
      animation:pulse 2.5s ease-in-out 2.5s infinite;
      text-shadow:0 0 15px rgba(0,255,100,.4);
      display:flex;align-items:center;justify-content:center;gap:8px;
      flex-wrap:wrap;
    }
    .click-invitation .hint .emoji{
      font-size:1.2em;animation:bounce 2s ease-in-out 3s infinite;
    }

    /* Effetto hover per l'invito */
    .croc-container:hover + .click-invitation{
      background:rgba(0,255,100,0.1);
      border-color:var(--green);
      transform:scale(1.02);
      transition:all 0.3s ease;
    }

    /* ANIMAZIONI */
    @keyframes fadeInUp{
      from{opacity:1;transform:translateY(30px)}
      to{opacity:1;transform:translateY(0)}
    }
    @keyframes slideInDown{
      from{opacity:1;transform:translateY(-40px)}
      to{opacity:1;transform:translateY(0)}
    }
    @keyframes bounce{
      0%, 20%, 50%, 80%, 100%{transform:translateY(0)}
      40%{transform:translateY(-8px)}
      60%{transform:translateY(-4px)}
    }
    @keyframes bounceIn{
      0%{opacity:0;transform:scale(.3)}
      50%{opacity:1;transform:scale(1.05)}
      70%{transform:scale(.9)}
      100%{opacity:1;transform:scale(1)}
    }
    @keyframes fadeIn{
      from{opacity:0}
      to{opacity:1}
    }
    @keyframes float{
      0%,100%{transform:translateY(0px)}
      50%{transform:translateY(-15px)}
    }
    @keyframes glow{
      0%{text-shadow:0 0 30px rgba(0,255,100,.4), 0 4px 8px rgba(0,0,0,.8)}
      100%{text-shadow:0 0 40px rgba(0,255,100,.6), 0 4px 8px rgba(0,0,0,.8)}
    }
    @keyframes pulse{
      0%, 100%{opacity:0.7; transform:scale(1)}
      50%{opacity:1; transform:scale(1.02)}
    }

    /* MODAL invece di drawer */
    .modal{
      position:fixed;inset:0;z-index:100;
      background:rgba(0,0,0,0.9);
      backdrop-filter:blur(10px);
      display:flex;align-items:center;justify-content:center;
      opacity:0;visibility:hidden;
      transition:all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .modal.open{
      opacity:1;visibility:visible;
    }
    
    .modal-content{
      background:linear-gradient(135deg, rgba(10,10,10,.98), rgba(0,20,5,.95));
      border:2px solid var(--border);
      border-radius:20px;
      padding:40px 35px;
      max-width:600px;
      width:90vw;
      max-height:90vh;
      overflow-y:auto;
      box-shadow:0 50px 100px rgba(0,0,0,.8), 0 0 50px rgba(0,255,100,.2);
      transform:scale(0.7) translateY(50px);
      transition:all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      position:relative;
    }
    .modal.open .modal-content{
      transform:scale(1) translateY(0);
    }

    .modal-header{
      text-align:center;margin-bottom:25px;
    }
    .modal-title{
      color:var(--green);font-weight:900;font-size:1.6rem;
      margin-bottom:10px;text-shadow:0 0 20px rgba(0,255,100,.3);
    }
    .modal-subtitle{
      color:var(--muted);font-size:1rem;line-height:1.4;
    }

    .close{
      position:absolute;top:15px;right:20px;
      background:transparent;border:0;color:#9adfb5;font-size:1.8rem;cursor:pointer;
      padding:5px;border-radius:50%;transition:.3s;
    }
    .close:hover{
      background:rgba(255,255,255,.1);transform:rotate(90deg) scale(1.1);
    }

    .form{margin-top:20px}
    .fg{margin:15px 0}
    .in{
      width:100%;padding:16px 18px;background:rgba(0,0,0,.9);color:#fff;
      border:2px solid var(--border);border-radius:14px;font-size:1rem;transition:.3s;
    }
    .in:focus{outline:none;border-color:var(--green);box-shadow:0 0 15px rgba(0,255,100,.4)}
    .row{display:flex;gap:12px;align-items:flex-start;margin:15px 0}
    .row input[type="checkbox"]{accent-color:var(--green);margin-top:4px;transform:scale(1.2)}
    .btn{
      width:100%;margin-top:20px;cursor:pointer;border:0;border-radius:14px;
      padding:20px 24px;font-weight:900;letter-spacing:1.2px;text-transform:uppercase;font-size:1.1rem;
      background:linear-gradient(135deg,var(--green),var(--green-2));color:#000;
      box-shadow:0 15px 35px rgba(0,255,100,.4);transition:.3s;
    }
    .btn:hover{transform:translateY(-3px);box-shadow:0 25px 50px rgba(0,255,100,.6)}
    .helper{text-align:center;color:#8b8b8b;font-size:.9rem;margin-top:15px}
    .success{display:none;text-align:center;margin-top:20px;color:#c9f7d9;font-size:1.1rem}
    .hp{position:absolute;left:-9999px;opacity:0}

    /* Responsive ottimizzato per viewport */
    @media (max-width:768px){
      .hero{padding:1vh 15px}
      .content-wrapper{gap:1vh}
      .croc{width:min(280px,60vw)}
      .click-invitation{padding:1vh 0.8vh}
    }
    @media (max-width:480px){
      .hero{padding:0.5vh 10px}
      .content-wrapper{gap:0.8vh}
      .croc{width:min(250px,70vw)}
      .click-invitation{padding:0.8vh 0.5vh}
    }
    
    /* Ottimizzazione per schermi molto alti */
    @media (min-height: 900px) {
      .content-wrapper{gap:2vh}
      .click-invitation{padding:2vh 1vh}
    }
    
    /* Dark mode e riduzione animazioni */
    @media (prefers-reduced-motion:reduce){
      *{animation:none !important;transition:none !important}
      .croc{animation:none}
      /* Assicurati che il titolo e l'invito siano sempre visibili anche senza animazioni */
      .main-title .line{opacity:1 !important}
      .click-invitation{opacity:1 !important; visibility:visible !important}
    }
  </style>
</head>
<body>

  <!-- HERO -->
  <section class="hero" aria-label="Hero">
    <div class="content-wrapper">
      <!-- Titolo principale sopra il coccodrillo -->
      <h1 class="main-title">
        <span class="line">ORK ACADEMY</span>
        <span class="line">RIAPRE CON</span>
        <span class="line">50 POSTI!</span>
      </h1>

      <!-- Coccodrillo con container cliccabile -->
      <div class="croc-container" id="crocContainer">
        <img class="croc" id="croc" src="assets/croc.png" alt="Mr. ORK mascotte - Clicca per iscriverti" />
      </div>

      <!-- Invito al click sotto il coccodrillo - MIGLIORATO -->
      <div class="click-invitation">
        <p class="main-text">🎯 Scopri i segreti che il 90% dei trader non conosce</p>
        <p class="hint">
          <span class="emoji">👆</span>
          <strong>CLICCA IL COCCODRILLO</strong>
          <span class="emoji">🐊</span>
        </p>
        <p style="color:var(--muted); font-size:0.9rem; margin-top:1vh; font-weight:600;">
          ↓ Guida gratuita + posto VIP riservato ↓
        </p>
      </div>
    </div>
  </section>

  <!-- MODAL con form -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <button class="close" id="closeModal" aria-label="Chiudi">✕</button>
      
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">🐊 Scarica la Guida Gratuita</h2>
        <p class="modal-subtitle">
          I 5 errori fatali che il 90% dei trader commette + accesso prioritario ai prossimi 50 posti della ORK Academy
        </p>
      </div>

      <form id="waitlistForm" class="form" novalidate>
        <!-- honeypot -->
        <input class="hp" type="text" name="company" tabindex="-1" autocomplete="off" aria-hidden="true"/>

        <div class="fg">
          <input class="in" type="text" name="name" id="name" placeholder="Il tuo nome" autocomplete="name" required />
        </div>
        <div class="fg">
          <input class="in" type="email" name="email" id="email" placeholder="La tua email" autocomplete="email" required />
        </div>

        <div class="row">
          <input type="checkbox" id="gdpr" required />
          <label for="gdpr" style="color:#a8a8a8">
            Acconsento a ricevere la guida gratuita e aggiornamenti sull'apertura dei posti
            (<a href="/privacy" style="color:var(--green);text-decoration:none">privacy</a>).
          </label>
        </div>

        <!-- tracking -->
        <input type="hidden" name="source" value="croc-click-modal" />
        <input type="hidden" name="utm" id="utmField" value="" />

        <button class="btn" type="submit">🚀 Scarica Guida + Riserva Posto VIP</button>
        <div id="success" class="success">🎉 Perfetto! Guida inviata e posto VIP riservato. Controlla la mail!</div>
        <p class="helper">Zero spam. Solo contenuti di valore e aggiornamenti esclusivi.</p>
      </form>
    </div>
  </div>

  <script>
    // Elementi DOM
    const modal = document.getElementById('modal');
    const crocContainer = document.getElementById('crocContainer');
    const croc = document.getElementById('croc');
    const hero = document.querySelector('.hero');

    // DEBUG: Forza la visibilità del titolo E dell'invito al caricamento
    window.addEventListener('DOMContentLoaded', () => {
      const titleLines = document.querySelectorAll('.main-title .line');
      titleLines.forEach(line => {
        line.style.opacity = '1';
        line.style.visibility = 'visible';
      });
      
      // Forza anche la visibilità dell'invito al click
      const clickInvitation = document.querySelector('.click-invitation');
      if(clickInvitation) {
        clickInvitation.style.opacity = '1';
        clickInvitation.style.visibility = 'visible';
      }
      
      console.log('Titolo e invito forzati visibili');
    });

    // Apertura modal al click del coccodrillo
    crocContainer.addEventListener('click', () => {
      // Effetto click
      crocContainer.classList.add('clicked');
      setTimeout(() => crocContainer.classList.remove('clicked'), 300);
      
      // Apri modal
      modal.classList.add('open');
      document.body.style.overflow = 'hidden';
    });

    // Chiusura modal
    document.getElementById('closeModal').addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    function closeModal() {
      modal.classList.remove('open');
      document.body.style.overflow = '';
    }

    // Effetti parallax avanzati
    let ticking = false;
    let mouseX = 0, mouseY = 0;
    
    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
      
      if (!ticking) {
        requestAnimationFrame(updateParallax);
        ticking = true;
      }
    });

    function updateParallax() {
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 2;
      
      // Calcola offset relativi al centro
      const offsetX = (mouseX - centerX) / centerX;
      const offsetY = (mouseY - centerY) / centerY;
      
      // Parallax sfondo (sottile)
      const bgMoveX = offsetX * 20;
      const bgMoveY = offsetY * 20;
      hero.style.setProperty('--bg-x', `${bgMoveX}px`);
      hero.style.setProperty('--bg-y', `${bgMoveY}px`);
      
      // Parallax coccodrillo (più pronunciato)
      const crocMoveX = offsetX * 30;
      const crocMoveY = offsetY * 30;
      crocContainer.style.transform = `translate(${crocMoveX}px, ${crocMoveY}px)`;
      
      // Parallax titolo (opposto e sottile)
      const titleMoveX = offsetX * -10;
      const titleMoveY = offsetY * -10;
      document.querySelector('.main-title').style.transform = `translate(${titleMoveX}px, ${titleMoveY}px)`;
      
      ticking = false;
    }

    // Aggiorna CSS per supportare le variabili parallax
    const style = document.createElement('style');
    style.textContent = `
      .hero::before {
        transform: translate(var(--bg-x, 0), var(--bg-y, 0));
      }
    `;
    document.head.appendChild(style);

    // UTM capture
    (function(){
      const params = new URLSearchParams(location.search);
      const entries = Array.from(params.entries()).map(([k,v])=>`${k}=${v}`).join('&');
      const utmField = document.getElementById('utmField');
      if(utmField) utmField.value = entries;
    })();

    // Form submit
    const form = document.getElementById('waitlistForm');
    const success = document.getElementById('success');
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      if (form.querySelector('.hp').value) return;

      const name = form.name.value.trim();
      const email = form.email.value.trim();
      const okEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      const gdpr = document.getElementById('gdpr').checked;

      if(!name || !okEmail || !gdpr){
        alert('⚠️ Controlla i campi: nome, email valida e consenso privacy.');
        return;
      }

      // Simula invio (qui collegheresti la tua API)
      success.style.display = 'block';
      form.style.display = 'none';
      
      // Chiudi modal dopo 3 secondi
      setTimeout(() => {
        closeModal();
        // Reset form dopo chiusura
        setTimeout(() => {
          form.reset();
          form.style.display = 'block';
          success.style.display = 'none';
        }, 500);
      }, 3000);
    });

    // Animazione iniziale potenziata
    window.addEventListener('load', () => {
      setTimeout(() => {
        const hint = document.querySelector('.click-invitation .hint');
        if(hint) hint.style.animationPlayState = 'running';
      }, 2500);
    });
  </script>
</body>
</html>